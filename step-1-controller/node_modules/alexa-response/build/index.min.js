"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var alexaSsmlJsx=require("alexa-ssml-jsx"),alexaConstants=require("alexa-constants"),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncGenerator=function(){function e(e){this.value=e}function t(t){function r(e,t){return new Promise(function(r,s){var i={key:e,arg:t,resolve:r,reject:s,next:null};a?a=a.next=i:(o=a=i,n(e,t))})}function n(r,o){try{var a=t[r](o),i=a.value;i instanceof e?Promise.resolve(i.value).then(function(e){n("next",e)},function(e){n("throw",e)}):s(a.done?"return":"normal",a.value)}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?n(o.key,o.arg):a=null}var o,a;this._invoke=r,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},get=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;if(void 0!==a)return a.call(n)},objectWithoutProperties=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},set=function e(t,r,n,s){var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);null!==a&&e(a,r,n,s)}else if("value"in o&&o.writable)o.value=n;else{var i=o.set;void 0!==i&&i.call(s,n)}return n},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},_class,_temp,Response$1=(_temp=_class=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,e),this.state=t}return createClass(e,[{key:"ask",value:function(e,t){return this.say(e,t).shouldEndSession(!1)}},{key:"say",value:function(t,r){return new e(_extends({},this.state,{response:_extends({},this.state.response,{shouldEndSession:!0},outputSpeech(t,r))}))}},{key:"reprompt",value:function(t,r){return new e(_extends({},this.state,{response:_extends({},this.state.response,{reprompt:_extends({},outputSpeech(t,r))})}))}},{key:"card",value:function(t){var r=t.type,n=void 0===r?alexaConstants.CardType.Simple:r,s=objectWithoutProperties(t,["type"]);return new e(_extends({},this.state,{response:_extends({},this.state.response,{card:_extends({},s,n&&{type:n})})}))}},{key:"attributes",value:function(t){return new e(_extends({},this.state,{sessionAttributes:_extends({},this.state.sessionAttributes,t)}))}},{key:"shouldEndSession",value:function(t){return new e(_extends({},this.state,{response:_extends({},this.state.response,{shouldEndSession:t})}))}},{key:"directives",value:function t(r){for(var n=arguments.length,s=Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];var t=Array.isArray(r)?r:[r].concat(s),a=this.state.response||{},i=a.directives,u=void 0===i?[]:i;return new e(_extends({},this.state,{response:_extends({},this.state.response,{directives:[].concat(toConsumableArray(u),toConsumableArray(t))})}))}},{key:"build",value:function(e){return _extends({version:"1.0"},this.state,{response:_extends({shouldEndSession:!0},this.state.response)},e||this.state.sessionAttributes?{sessionAttributes:_extends({},e,this.state.sessionAttributes)}:null)}}]),e}(),_class.ask=function(){var e;return(e=new Response$1).ask.apply(e,arguments)},_class.say=function(){var e;return(e=new Response$1).say.apply(e,arguments)},_class.card=function(){var e;return(e=new Response$1).card.apply(e,arguments)},_class.reprompt=function(){var e;return(e=new Response$1).reprompt.apply(e,arguments)},_class.shouldEndSession=function(){var e;return(e=new Response$1).shouldEndSession.apply(e,arguments)},_class.directives=function(){var e;return(e=new Response$1).directives.apply(e,arguments)},_class.build=function(e){return Object.keys(e).reduce(function(t,r){var n=e[r],s="string"==typeof n?n:n,o="string"==typeof n?void 0:n.type;switch(r){case"ask":return t.ask(s,o);case"say":return t.say(s,o);case"reprompt":return t.reprompt(s,o);case"card":return t.card(n);case"attributes":return t.attributes(n);case"shouldEndSession":return t.shouldEndSession(n);case"directives":return t.directives(n)}},new Response$1)},_temp),outputSpeech=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:alexaConstants.SpeechType.PlainText;if(t===alexaConstants.SpeechType.SSML||"object"===("undefined"==typeof e?"undefined":_typeof(e))){var r="object"===("undefined"==typeof e?"undefined":_typeof(e))?alexaSsmlJsx.renderToString(e):e;return{outputSpeech:{type:alexaConstants.SpeechType.SSML,ssml:r}}}return{outputSpeech:{type:t,text:e}}},Directive=alexaConstants.AudioPlayer.Directive,PlayBehavior=alexaConstants.AudioPlayer.PlayBehavior,ClearBehavior=alexaConstants.AudioPlayer.ClearBehavior,AudioPlayer$1={play:function(e){return{type:Directive.Play,playBehavior:PlayBehavior.ReplaceAll,audioItem:{stream:e}}},enqueue:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:Directive.Play,playBehavior:t?PlayBehavior.ReplaceEnqueued:PlayBehavior.Enqueue,audioItem:{stream:e}}},stop:function(){return{type:Directive.Stop}},clearQueue:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:Directive.ClearQueue,clearBehavior:e?ClearBehavior.ClearAll:ClearBehavior.ClearEnqueued}}},ask$1=Response$1.ask,say$1=Response$1.say,card$1=Response$1.card,reprompt$1=Response$1.reprompt,shouldEndSession$1=Response$1.shouldEndSession,directives=Response$1.directives,build$1=Response$1.build;exports.AudioPlayer=AudioPlayer$1,exports.Response=Response$1,exports.default=Response$1,exports.ask=ask$1,exports.say=say$1,exports.card=card$1,exports.reprompt=reprompt$1,exports.shouldEndSession=shouldEndSession$1,exports.directives=directives,exports.build=build$1;
